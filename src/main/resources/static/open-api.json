{"openapi":"3.0.1","info":{"title":"Task Parser: Job Processing Service.","description":"A job is a collection of tasks, where each task has a name and a shell command. Tasks may depend on other tasks and require that those are executed beforehand. The service takes care of sorting the tasks to create a proper execution order.","license":{"name":"Apache 2.0","url":"https://www.apache.org/licenses/LICENSE-2.0"},"version":"v1"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"paths":{"/api/jobs/v1/tasks":{"post":{"tags":["job-controller-v-1"],"summary":"Get sorted job tasks in the form of JSON.","description":"Tasks are sorted based on their requirements(dependencies).","operationId":"solveJobTasks","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Job"},"example":{"tasks":[{"name":"task-1","command":"touch /tmp/file1"},{"name":"task-2","command":"cat /tmp/file1","requires":["task-3"]},{"name":"task-3","command":"echo 'Hello World!' > /tmp/file1","requires":["task-1"]},{"name":"task-4","command":"rm /tmp/file1","requires":["task-2","task-3"]}]}}},"required":true},"responses":{"400":{"description":"Input data problem. Possible cause:\n - cyclic dependency;\n - unsatisfiable requirement.","content":{"application/json":{"example":{"requestId":"cd414b50-67ec-46ea-a63b-022554b0d300","status":"BAD_REQUEST","message":"Input data problem. Possible cause:\n - cyclic dependency;\n - unsatisfiable requirement.","localizedMessage":"Input data problem. Possible cause:\n - cyclic dependency;\n - unsatisfiable requirement."}}}},"200":{"description":"Topographic sort solved.","content":{"application/json":{"example":[{"name":"task-1","command":"touch /tmp/file1"},{"name":"task-3","command":"echo 'Hello World!' > /tmp/file1"},{"name":"task-2","command":"cat /tmp/file1"},{"name":"task-4","command":"rm /tmp/file1"}]}}}}}},"/api/jobs/v1/commands":{"post":{"tags":["job-controller-v-1"],"summary":"Get the extracted job task commands for execution.","description":"Get the extracted job task commands in order satisfying their requirements(dependencies).","operationId":"getCommandsScript","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"type":"string","description":"The job data as raw text."},"example":"{\"tasks\":[{\"name\":\"task-1\",\"command\":\"touch /tmp/file1\"},{\"name\":\"task-2\",\"command\":\"cat /tmp/file1\",\"requires\":[\"task-3\"]},{\"name\":\"task-3\",\"command\":\"echo 'Hello World!' > /tmp/file1\",\"requires\":[\"task-1\"]},{\"name\":\"task-4\",\"command\":\"rm /tmp/file1\",\"requires\":[\"task-2\",\"task-3\"]}]}"}},"required":true},"responses":{"400":{"description":"Input data problem. Possible cause:\n - cyclic dependency;\n - unsatisfiable requirement.","content":{"text/plain":{"example":{"requestId":"cd414b50-67ec-46ea-a63b-022554b0d300","status":"BAD_REQUEST","message":"Input data problem. Possible cause:\n - cyclic dependency;\n - unsatisfiable requirement.","localizedMessage":"Input data problem. Possible cause:\n - cyclic dependency;\n - unsatisfiable requirement."}}}},"200":{"description":"Topographic sort solved.","content":{"text/plain":{"example":"touch /tmp/file1\necho 'Hello World!' > /tmp/file1\ncat /tmp/file1\nrm /tmp/file1\n"}}}}}}},"components":{"schemas":{"Job":{"type":"object","properties":{"tasks":{"type":"array","items":{"$ref":"#/components/schemas/TaskInput"}}},"description":"The job input data."},"TaskInput":{"required":["command","name"],"type":"object","properties":{"name":{"type":"string","example":"task-2"},"command":{"type":"string","example":"cat /tmp/file12"},"requires":{"type":"array","example":["task-1","task-3"],"items":{"type":"string","example":"[\"task-1\",\"task-3\"]"}}}}}}}